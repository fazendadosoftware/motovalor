(function(e){function n(n){for(var c,o,i=n[0],d=n[1],u=n[2],s=0,b=[];s<i.length;s++)o=i[s],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&b.push(a[o][0]),a[o]=0;for(c in d)Object.prototype.hasOwnProperty.call(d,c)&&(e[c]=d[c]);l&&l(n);while(b.length)b.shift()();return r.push.apply(r,u||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],c=!0,o=1;o<t.length;o++){var d=t[o];0!==a[d]&&(c=!1)}c&&(r.splice(n--,1),e=i(i.s=t[0]))}return e}var c={},a={app:0},r=[];function o(e){return i.p+"js/"+({"polyfills-core-js":"polyfills-core-js","polyfills-dom":"polyfills-dom"}[e]||e)+"."+{"chunk-02c995b5":"45d315f4","chunk-09155df3":"e3ac211b","chunk-09162720":"102e7a40","chunk-097e0872":"dbc78691","chunk-0e93a01c":"b0a5975b","chunk-106fab1a":"fe76aac9","chunk-1bff95de":"ab2d4148","chunk-1dbc15a2":"8c41fb29","chunk-21a76241":"5ef9d983","chunk-25d83ca8":"6587c6be","chunk-2d0a463b":"9e69678c","chunk-2d0c073f":"017f6960","chunk-2d0d43da":"bc49aedb","chunk-2d0da04a":"620f425b","chunk-2d0e5812":"730e6176","chunk-2d0f00dd":"2cd3bed5","chunk-2d213189":"2b11f265","chunk-2d217e6a":"9d5e5387","chunk-2d218068":"115cead1","chunk-2d21da73":"56e20878","chunk-2d22540b":"ed5640c8","chunk-2d2304d2":"e5c3a3b9","chunk-2d237b00":"037b5772","chunk-2d238444":"fbd790bd","chunk-30dd9750":"6b7d6eb0","chunk-37f2300e":"cc3c45b7","chunk-3ed29de3":"9e68e146","chunk-412d7584":"f3ae5850","chunk-41c0f7a4":"e0de4af1","chunk-462c869e":"ae6dddd3","chunk-47245a33":"b9e6a322","chunk-4739acd0":"18f7dcc3","chunk-485adc83":"99ebb2b4","chunk-53b1137a":"8970691a","chunk-541ea42d":"63c37d24","chunk-54bbd082":"dbfcec05","chunk-59d4c87c":"9a2960ba","chunk-5a8ac886":"c89483b8","chunk-5ff96a24":"515adcdf","chunk-69eb8776":"60866cb6","chunk-6d375f34":"3c78ca1c","chunk-6e28a599":"02d9a707","chunk-7119f24a":"f2bca6d5","chunk-7548ca2d":"18f11e7a","chunk-79f1dac7":"454e7c12","chunk-858cd918":"54b9acef","chunk-8bb7f81e":"4465b78a","chunk-a9395c36":"8777d2b5","chunk-ab0ff1e4":"674ce8f7","chunk-d0e8aa0a":"ff130109","chunk-d8413eac":"e1c32b8b","chunk-e5275ddc":"f61bbd61","chunk-eaa2b130":"700c0fb3","polyfills-core-js":"2031155b","polyfills-dom":"6949ded0","chunk-2d2297f7":"78980670","chunk-2d2073d6":"9e36930f","chunk-2d0b33e3":"2e69defc","chunk-2d0b9280":"58416f48","chunk-2d0baac9":"ecbd8a2b","chunk-2d21a589":"a05685ae","chunk-2d2376e6":"a05b70ee"}[e]+".js"}function i(n){if(c[n])return c[n].exports;var t=c[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(e){var n=[],t=a[e];if(0!==t)if(t)n.push(t[2]);else{var c=new Promise((function(n,c){t=a[e]=[n,c]}));n.push(t[2]=c);var r,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=o(e);var u=new Error;r=function(n){d.onerror=d.onload=null,clearTimeout(s);var t=a[e];if(0!==t){if(t){var c=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;u.message="Loading chunk "+e+" failed.\n("+c+": "+r+")",u.name="ChunkLoadError",u.type=c,u.request=r,t[1](u)}a[e]=void 0}};var s=setTimeout((function(){r({type:"timeout",target:d})}),12e4);d.onerror=d.onload=r,document.head.appendChild(d)}return Promise.all(n)},i.m=e,i.c=c,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var c in e)i.d(t,c,function(n){return e[n]}.bind(null,c));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="/",i.oe=function(e){throw console.error(e),e};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],u=d.push.bind(d);d.push=n,d=d.slice();for(var s=0;s<d.length;s++)n(d[s]);var l=u;r.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("cd49")},"45b3":function(e,n,t){var c={"./ion-icon.entry.js":["ec64","chunk-2d2304d2"]};function a(e){if(!t.o(c,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=c[e],a=n[0];return t.e(n[1]).then((function(){return t(a)}))}a.keys=function(){return Object.keys(c)},a.id="45b3",e.exports=a},"69fc":function(e,n,t){"use strict";var c=t("7a23"),a=t("bc43"),r=t("1547"),o=t("4d75");const i="fipe.db",d=e=>e.replace(/.db/,"SQLite.db");let u=null,s=null;const l=new o["b"](o["a"]);Object(a["a"])().then(async()=>await Object(a["b"])(window));const b=async e=>{const{values:n=[]}=await l.getDatabaseList().catch(()=>({values:[]}));return n.includes(e)},h=async e=>{if(!1===u){let e;await new Promise((n,t)=>{e=setInterval(async()=>{var t,c,a;!0===u&&null!==(t=null===(c=await(null===(a=s)||void 0===a?void 0:a.isDBOpen()))||void 0===c?void 0:c.result)&&void 0!==t&&t&&(clearInterval(e),e=void 0,n(void 0))},250)})}if(!0===u)return;u=!1,await o["a"].checkConnectionsConsistency({dbNames:[]}).catch(e=>{});const n=r["a"].getPlatform();"web"!==n&&await l.deleteOldDatabases().catch(()=>{});try{var t;if("web"===n&&null===document.querySelector("jeep-sqlite")){const e=document.createElement("jeep-sqlite");document.body.appendChild(e),await l.initWebStore()}if((!await b(d(i))||!0===(null===e||void 0===e?void 0:e.syncDatabase))&&(await l.copyFromAssets(!0),!await b(d(i))))throw Error("Could not find database!");const{result:c=!1}=await l.checkConnectionsConsistency(),{result:a=!1}=await l.isConnection(i);s=c&&a?await l.retrieveConnection(i):await l.createConnection(i,!1,"no-encryption",1),null!==(t=await s.isDBOpen().then(({result:e})=>e))&&void 0!==t&&t||await s.open()}finally{u=!0}},f=async()=>{var e;if(null!==s)return s;if(null!==(e=u)&&void 0!==e&&e||await h({syncDatabase:!0}),null===s)throw Error("could not initialize db");return s},y=async(e,n)=>{const t=await f(),{values:c,error:a=null}=await t.query(e,n).then(({values:e=[]})=>({values:e,error:null})).catch(e=>({values:[],error:e}));if(null!==a)throw a;return c},p=()=>({getInstance:f,executeSQL:y});var k=p,j=t("ade3"),m=t("bc92");const v=982034890,O={makeId:"Marca",fipeCode:"CodigoFipe",vehicleTypeCode:"TipoVeiculo",fuelTypeCode:"SiglaCombustivel",name:"Modelo"};class g{constructor(){Object(j["a"])(this,"id",-1),Object(j["a"])(this,"makeId",-1),Object(j["a"])(this,"vehicleTypeCode",1),Object(j["a"])(this,"name",""),Object(j["a"])(this,"fipeCode",""),Object(j["a"])(this,"fuelTypeCode","G")}static getModelFieldIndexes(e){const n=Object.entries(O).map(([n,t])=>[n,e.indexOf(t)]),t=e.indexOf("Valor"),c=e.indexOf("AnoModelo"),a=e.indexOf("Marca");return{makeColumnIndex:a,modelKeys:n,priceColIndex:t,modelYearColumnIndex:c}}static fromRow(e,n,t){const c=n.reduce((n,[t,c])=>({...n,[t]:e[c]}),{});if(void 0!==c.name&&(c.name=c.name.toUpperCase()),c.id=Object(m["v3"])(g.getModelIdString(c),v),c.makeId=t,void 0!==c.fuelTypeCode){const e=g.FUEL_TYPE_DICTIONARY[c.fuelTypeCode];if(void 0===e)throw Error("Invalid fuel type code "+c.fuelTypeCode);c.fuelTypeCode=e}return c}static getKeys(){return Object.keys(new g)}}Object(j["a"])(g,"FUEL_TYPE_DICTIONARY",{G:"G",D:"D","Á":"A"}),Object(j["a"])(g,"getModelIdString",e=>`${e.makeId} ${e.name} ${e.fuelTypeCode}`.replace(/ /g,"_"));class w{constructor(){Object(j["a"])(this,"id",-1),Object(j["a"])(this,"make",""),Object(j["a"])(this,"modelId",-1),Object(j["a"])(this,"model",""),Object(j["a"])(this,"vehicleTypeCode",1),Object(j["a"])(this,"fuelTypeCode","G"),Object(j["a"])(this,"fipeCode",""),Object(j["a"])(this,"refDate",-1),Object(j["a"])(this,"modelYear",-1),Object(j["a"])(this,"modelYears",[]),Object(j["a"])(this,"price",-1),Object(j["a"])(this,"deltaPrice12M",-1),Object(j["a"])(this,"prices",[]),Object(j["a"])(this,"deltaPrices",[])}static getTableName(){return"models"}static getKeys(){return Object.keys(new w).filter(e=>"_"!==e[0])}static getId(e,n){return 1e5*e+n}static mapFromSql(e,n=null){const t=(null!==n&&void 0!==n?n:this.getKeys()).reduce((n,t)=>({...n,[t]:e[t]}),{});return"string"===typeof t.prices&&(t.prices=JSON.parse(t.prices)),"string"===typeof t.deltaPrices&&(t.deltaPrices=JSON.parse(t.deltaPrices)),"string"===typeof t.modelYears&&(t.modelYears=JSON.parse(t.modelYears)),t}}const{executeSQL:C}=k(),T=e=>{const n=["modelYear","price"],t=["fipeCode","make","vehicleTypeCode","fuelTypeCode","id"],c=[];t.filter(n=>Array.isArray(e[n])&&e[n].length>0).forEach(n=>{var t;return c.push(`${n} IN (${null===(t=e[n])||void 0===t?void 0:t.map(e=>"string"===typeof e?`"${e}"`:e).join(",")})`)}),n.forEach(n=>{var t;const{min:a=null,max:r=null}=null!==(t=e[n])&&void 0!==t?t:{};null!==a&&null!==r?c.push(`${n} BETWEEN ${a} AND ${r}`):null!==a?c.push(`${n} >= ${a}`):null!==r&&c.push(`${n} <= ${r}`)}),void 0!==e.zeroKm&&c.push(`modelYear ${!0===e.zeroKm?"=":"!="} 32000`);const a=c.length?" WHERE "+c.join(" AND "):"";return a},_=async e=>{var n,t,c;const a=(null!==(n=null===e||void 0===e?void 0:e.fields)&&void 0!==n?n:[]).join(", ")||"*",r=T(e),o=e.limit?" LIMIT "+e.limit:"",i="number"===typeof e.offset?" OFFSET "+e.offset:"",d=Array.isArray(e.sort)?" ORDER BY "+(Array.isArray(e.sort)?e.sort.map(({key:e,asc:n=null})=>`${e}${null===n?"":!0===n?" ASC":" DESC"}`):""):"",u=(null!==(t=null===e||void 0===e||null===(c=e.fields)||void 0===c?void 0:c.indexOf("modelYears"))&&void 0!==t?t:-1)>-1?" GROUP BY modelId":"",s=[r,u,d,o,i].join(""),l=`SELECT ${a} FROM ${w.getTableName()}${s}`;console.log("SQL STATEMENT",l);const b=await C(l).then(n=>n.map(n=>w.mapFromSql(n,e.fields)));return b},E=async e=>{const n=T(e),t=`SELECT COUNT(id) as count FROM ${w.getTableName()} ${n};`,[{count:c}]=await C(t);return c},L=async(e,n)=>{const t=`SELECT * FROM models WHERE modelId = ${e} AND modelYear = ${n} LIMIT 1;`,[c]=await C(t).then(e=>e.map(e=>w.mapFromSql(e)));return c},I=()=>({getModels:_,getModelCount:E,getModel:L});var x=I,M=t("5bd5"),S=t("a28f"),$=t.n(S);const N=$()({browser:{asObject:!0}}),P=()=>({logger:N});var D=P;const{logger:A}=D(),{getModels:Y,getModelCount:F}=x();let R=new M["Index"];const U=Object(c["C"])(!1),q=async()=>{A.debug("starting to index..."),U.value=!0,R=new M["Index"];try{const e=await Y({fields:["modelId","model","make","fuelTypeCode","modelYears"],sort:[{key:"make"},{key:"model"}]});e.forEach(e=>{const{modelId:n=-1,make:t="",model:c="",fuelTypeCode:a="",modelYears:r=[]}=e;r.forEach(e=>{const r=w.getId(n,e),o=`${t} ${c} ${a} ${e}`;R.add(r,o)})}),A.debug("done indexing...")}finally{U.value=!1}},K=()=>{const e=Object(c["C"])([]),n=Object(c["C"])(""),t=Object(c["C"])(0),a=100,r=Object(c["C"])([{key:"make"},{key:"model"}]),o=Object(c["C"])(),i=Object(c["C"])(null),d=async()=>{t.value++;try{const i=Object(c["L"])(e).length;let d=await Y({fields:["id","model","make","fuelTypeCode","vehicleTypeCode","modelYear","price","deltaPrice12M"],id:Object(c["L"])(o),offset:i,limit:a,sort:Object(c["L"])(r)});if(Array.isArray(Object(c["L"])(o))){var n;const e=d.reduce((e,n)=>{var t;return{...e,[null!==(t=null===n||void 0===n?void 0:n.id)&&void 0!==t?t:-1]:n}},{});d=(null!==(n=Object(c["L"])(o))&&void 0!==n?n:[]).reduce((n,t)=>{const c=e[t];return void 0!==c&&n.push(c),n},[])}return Object(c["L"])(e).push(...d),Object(c["L"])(e)}finally{t.value--}};Object(c["M"])([r,o],async()=>{e.value=[],i.value=await F({}),d()},{immediate:!0}),Object(c["M"])(n,async e=>{o.value=""===e?void 0:await R.search({query:e,limit:30})});const u=async()=>{await q()};return{isIndexing:Object(c["c"])(()=>Object(c["L"])(U)),isLoading:Object(c["c"])(()=>Object(c["L"])(t)>0),fetchNextModelPage:d,models:Object(c["c"])(()=>Object(c["L"])(e)),totalCount:Object(c["c"])(()=>Object(c["L"])(i)),hasNextPage:Object(c["c"])(()=>{var n;return null===Object(c["L"])(i)||(null!==(n=Object(c["L"])(i))&&void 0!==n?n:-1)>Object(c["L"])(e).length}),searchQuery:n,sort:r,init:u}};n["a"]=K},"8c28":function(e,n,t){},aa55:function(e,n,t){var c={"./ion-action-sheet.entry.js":["6618","chunk-485adc83"],"./ion-alert.entry.js":["f06c","chunk-106fab1a"],"./ion-app_8.entry.js":["c215","chunk-53b1137a"],"./ion-avatar_3.entry.js":["cf12","chunk-59d4c87c"],"./ion-back-button.entry.js":["4b35","chunk-69eb8776"],"./ion-backdrop.entry.js":["429d","chunk-2d0c073f"],"./ion-button_2.entry.js":["4453","chunk-25d83ca8"],"./ion-card_5.entry.js":["070b","chunk-541ea42d"],"./ion-checkbox.entry.js":["dfd8","chunk-09162720"],"./ion-chip.entry.js":["430d","chunk-09155df3"],"./ion-col_3.entry.js":["6a8a","chunk-2d0da04a"],"./ion-datetime_3.entry.js":["c15b","chunk-21a76241"],"./ion-fab_3.entry.js":["dd47","chunk-3ed29de3"],"./ion-img.entry.js":["9588","chunk-2d0e5812"],"./ion-infinite-scroll_2.entry.js":["d1e5","chunk-2d21da73"],"./ion-input.entry.js":["d111","chunk-37f2300e"],"./ion-item-option_3.entry.js":["1bb3","chunk-5ff96a24"],"./ion-item_8.entry.js":["69da","chunk-5a8ac886"],"./ion-loading.entry.js":["53a5","chunk-6d375f34"],"./ion-menu_3.entry.js":["cb00","chunk-097e0872"],"./ion-modal.entry.js":["1ad0","chunk-1bff95de"],"./ion-nav_2.entry.js":["e44f","chunk-4739acd0"],"./ion-popover.entry.js":["4285","chunk-e5275ddc"],"./ion-progress-bar.entry.js":["9b72","chunk-1dbc15a2"],"./ion-radio_2.entry.js":["beb3","chunk-0e93a01c"],"./ion-range.entry.js":["719f","chunk-54bbd082"],"./ion-refresher_2.entry.js":["0a47","chunk-d8413eac"],"./ion-reorder_2.entry.js":["6672","chunk-d0e8aa0a"],"./ion-ripple-effect.entry.js":["c8da","chunk-2d218068"],"./ion-route_4.entry.js":["10e8","chunk-858cd918"],"./ion-searchbar.entry.js":["8625","chunk-a9395c36"],"./ion-segment_2.entry.js":["0c02","chunk-462c869e"],"./ion-select_3.entry.js":["d25f","chunk-79f1dac7"],"./ion-slide_2.entry.js":["05dd","chunk-2d0a463b"],"./ion-spinner.entry.js":["e11b","chunk-8bb7f81e"],"./ion-split-pane.entry.js":["aae8","chunk-2d213189"],"./ion-tab-bar_2.entry.js":["a2bb","chunk-02c995b5"],"./ion-tab_2.entry.js":["6725","chunk-47245a33"],"./ion-text.entry.js":["ed3b","chunk-30dd9750"],"./ion-textarea.entry.js":["8798","chunk-eaa2b130"],"./ion-toast.entry.js":["c1a5","chunk-41c0f7a4"],"./ion-toggle.entry.js":["bef2","chunk-7548ca2d"],"./ion-virtual-scroll.entry.js":["5fd7","chunk-2d0d43da"]};function a(e){if(!t.o(c,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=c[e],a=n[0];return t.e(n[1]).then((function(){return t(a)}))}a.keys=function(){return Object.keys(c)},a.id="aa55",e.exports=a},be76:function(e,n,t){var c={"./jeep-sqlite.entry.js":["e439","chunk-2d22540b"]};function a(e){if(!t.o(c,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=c[e],a=n[0];return t.e(n[1]).then((function(){return t(a)}))}a.keys=function(){return Object.keys(c)},a.id="be76",e.exports=a},cd49:function(e,n,t){"use strict";t.r(n);var c=t("7a23"),a=t("d867"),r=Object(c["l"])({setup(e){return(e,n)=>(Object(c["z"])(),Object(c["e"])(Object(c["L"])(a["a"]),null,{default:Object(c["N"])(()=>[Object(c["k"])(Object(c["L"])(a["t"]))]),_:1}))}});const o=r;var i=o,d=t("bec5");const u=[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:async()=>await t.e("chunk-7119f24a").then(t.bind(null,"bb51"))},{path:"/models",name:"models",component:async()=>await t.e("chunk-ab0ff1e4").then(t.bind(null,"cda7"))},{path:"/filters",name:"filters",redirect:"/filters/current",component:async()=>await t.e("chunk-2d0f00dd").then(t.bind(null,"9b75")),children:[{path:"current",name:"currentFilter",component:async()=>await t.e("chunk-412d7584").then(t.bind(null,"caed"))},{path:"saved",name:"savedFilters",component:async()=>await t.e("chunk-6e28a599").then(t.bind(null,"0b0a"))}]}],s=Object(d["a"])({history:Object(d["b"])("/"),routes:u});var l=s,b=t("6917"),h=(t("37c6"),t("4b63"),t("4041"),t("51ef"),t("a237"),t("8c28"),t("b972"),t("69fc"));const{init:f}=Object(h["a"])();f();const y=Object(c["d"])(i).use(a["C"]).use(b["a"]).use(l);l.isReady().then(()=>y.mount("#app"))}});
//# sourceMappingURL=app.79585090.js.map